{% extends "base.html" %}
{% load static %}
{% block head %}
    <link rel="stylesheet" type="text/css" href= "{% static 'css/profilepage.css'%}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    {% static "" as baseUrl %}
    <script>
        var loadImage = function(event) {
            console.log("AA")
            var output = document.getElementById('img');
            output.src = URL.createObjectURL(event.target.files[0]);
            output.onload = function() {
                URL.revokeObjectURL(output.src) // free memory
            }
        };
        var closeModal = function(event) {
            document.getElementById('id01').style.display='none';
        };
        var openModal = function(event) {
            document.getElementById('id01').style.display='block';
        };
        var generateImg = function(event) {
            for (let i = 0; i < 10; i++) { 
                var img = document.createElement("img");
                img.src = "{{ baseUrl }}"+i + '.jpg';
                img.className = 'modal_img';
                img.onclick = function() { alert(i); closeModal();};
                var src = document.getElementById("modal-content");
                src.appendChild(img);
            }
        }
        {% comment %} var selectImage = function {% endcomment %}
    </script>
{% endblock head %}

{% block navbar %}
    <header>
        <div class="container">
            <div class="header-left">
                <b> Profile Page </b>
            </div>
            <div class="header-right">
                <a href="/profile"><b>Your Profile</b></a>
            </div>
        </div>
    </header> 
{% endblock navbar %}

{% block content %}
    <div class="form-container">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{form.image_name.as_hidden}}
            <div class = "image_form">
                <img id="img" src="media/{{ form.image.value }}" width="250" height="250" >
                <input type="file" name="image" accept="image/*" id="id_image" onchange="loadImage(event)" >
            </div>
            <div class="mb-3">
                <label for="id_name" class="form-label">Name</label>
                <input type="text" class="form-control" name="name" id="id_name"  maxlength="100" required="" value={{ form.name.value }}>
            </div>
            <div class="mb-3">
                <label for="id_about" class="form-label">About</label>
                <textarea class="form-control" name="about" id="id_about" rows="3" required="" >{{form.about.value}}</textarea>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>


    <button onclick='openModal()'>Open Modal</button>

    <div id="id01" class="modal">
        <span onclick='closeModal()' class="close">Ã—</span>
        <div id="modal-content">
            <button type="button" onclick="document.getElementById('id01').style.display='none'">Cancel</button>
            <br>
            <img src="{% static '1.jpg' %}", onlick='selectImage()'>
        </div>
    </div>

    <script> generateImg(); </script>
{% endblock content %}
